// 
// Decompiled by Procyon v0.5.36
// 

package Lavish.modules.exploit;

import net.minecraft.network.Packet;
import Lavish.utils.misc.NetUtil;
import net.minecraft.network.play.client.C00PacketKeepAlive;
import Lavish.event.events.EventPacket;
import Lavish.event.Event;
import Lavish.ClickGUI.settings.Setting;
import Lavish.Client;
import Lavish.modules.Category;
import Lavish.modules.Module;

public class PingSpoof extends Module
{
    public PingSpoof() {
        super("PingSpoof", 0, true, Category.Exploit, "Spoofs your ping");
        Client.instance.setmgr.rSetting(new Setting("Ping Amount", this, 200.0, 1.0, 10000.0, false));
    }
    
    @Override
    public void onEvent(final Event e) {
        if (e instanceof EventPacket && ((EventPacket)e).isSending() && ((EventPacket)e).getPacket() instanceof C00PacketKeepAlive) {
            final C00PacketKeepAlive packet = (C00PacketKeepAlive)((EventPacket)e).getPacket();
            e.setCancelled(true);
            final Thread t1 = new Thread(new Runnable() {
                @Override
                public void run() {
                    try {
                        Thread.sleep((long)Client.instance.setmgr.getSettingByName("Ping Amount").getValDouble());
                    }
                    catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    if (PingSpoof.mc.getNetHandler() != null) {
                        NetUtil.sendPacketNoEvents(packet);
                    }
                }
            });
            t1.setName("PingSpoof");
            t1.start();
        }
    }
}
