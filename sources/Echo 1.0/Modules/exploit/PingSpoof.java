package dev.echo.module.impl.exploit;

import dev.echo.listener.Link;
import dev.echo.listener.Listener;
import dev.echo.listener.event.impl.network.PacketSendEvent;
import dev.echo.module.Category;
import dev.echo.module.Module;
import dev.echo.module.settings.impl.BooleanSetting;
import dev.echo.module.settings.impl.NumberSetting;
import dev.echo.utils.player.PingSpoofUtil;

public class PingSpoof extends Module {

    private final NumberSetting pingspoofdelay = new NumberSetting("Spoof Delay", 500, 5000, 0, 10);
    private final NumberSetting packetloss = new NumberSetting("Packet Loss", 0, 100, 0, 1);
    private final BooleanSetting C00 = new BooleanSetting("C00 Cancel", true);
    private final BooleanSetting C0F = new BooleanSetting("C0F Cancel", true);
    private final BooleanSetting C0B = new BooleanSetting("C0B Cancel", true);
    private final BooleanSetting C13 = new BooleanSetting("C14 Cancel", true);
    private final BooleanSetting C16 = new BooleanSetting("C16 Cancel", true);

    public PingSpoof() {
        super("Ping Spoof", Category.EXPLOIT, "Spoofs your ping");
        this.addSettings(pingspoofdelay, packetloss, C00, C0F, C0B, C13, C16);
    }

    @Link
    public Listener<PacketSendEvent> onPacketSend = event -> {
        if (mc.thePlayer == null) {
            return;
        }
        PingSpoofUtil.spoof(event, pingspoofdelay.getValue().intValue(), C00.isEnabled(), C0F.isEnabled(), C0B.isEnabled(), C13.isEnabled(), C16.isEnabled(), packetloss.getValue().intValue());
    };
}
