package epsilon.modules.exploit;

import org.lwjgl.input.Keyboard;

import epsilon.events.Event;
import epsilon.events.listeners.packet.EventSendPacket;
import epsilon.modules.Module;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.C0BPacketEntityAction;

public class AntiNametag extends Module {

	public AntiNametag() {
		super("AntiNametag", Keyboard.KEY_NONE, Category.EXPLOIT, "Uses packets to hide your nametag");
	}

	public void onEnable() {
		
		mc.getNetHandler().sendPacketNoEvent(new C0BPacketEntityAction(mc.thePlayer,C0BPacketEntityAction.Action.START_SNEAKING));
		
	}
	
	public void onDisable() {
		
		mc.getNetHandler().sendPacketNoEvent(new C0BPacketEntityAction(mc.thePlayer,C0BPacketEntityAction.Action.STOP_SNEAKING));
		
	}
	
	public void onEvent(Event e) {
		
		if(e instanceof EventSendPacket) {
			

    		Packet p = e.getPacket(); 
    		
    		if(p instanceof C0BPacketEntityAction) {
    			C0BPacketEntityAction packet = (C0BPacketEntityAction) p;
    			
    			if(packet.getAction() == C0BPacketEntityAction.Action.STOP_SNEAKING)
    				e.setCancelled();
    			
    			
    		}
			
		}
		
	}
	
}
